<!DOCTYPE html>
<html>
  <head>
    <title>LocalStorage Debug</title>
  </head>
  <body>
    <h1>LocalStorage Debug Tool</h1>
    <button onclick="checkStorage()">Check localStorage</button>
    <button onclick="addTestTask()">Add Test Task</button>
    <button onclick="clearStorage()">Clear All Storage</button>
    <div id="output"></div>

    <script>
      function checkStorage() {
        const output = document.getElementById("output");
        let html = "<h2>LocalStorage Contents:</h2>";

        // Check for all study-related keys
        const keys = Object.keys(localStorage);
        html += "<pre>";
        keys.forEach((key) => {
          if (
            key.includes("study") ||
            key.includes("Plan") ||
            key.includes("eduaid")
          ) {
            html += `${key}: ${localStorage.getItem(key)}\n`;
          }
        });
        html += "</pre>";

        output.innerHTML = html;
      }

      function addTestTask() {
        // Simulate adding a task with a fake userId
        const userId = "test-user-123";
        const testTask = [
          {
            id: Date.now(),
            title: "Test Task RR",
            subject: "mathematics",
            type: "homework",
            priority: "medium",
            date: new Date().toISOString().split("T")[0],
            time: "09:00",
            duration: "60",
            completed: false,
            createdAt: new Date().toISOString(),
          },
        ];

        localStorage.setItem(`studyPlan_${userId}`, JSON.stringify(testTask));
        console.log("Test task added for user:", userId);
        checkStorage();
      }

      function clearStorage() {
        localStorage.clear();
        checkStorage();
      }

      // Auto-check on load
      checkStorage();
    </script>
  </body>
</html>
